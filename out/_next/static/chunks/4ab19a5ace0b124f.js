(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20614,e=>{e.v({flights:[{id:"1",airline:"Airline A",departure:{airport:"LHE",city:"Lahore",time:"2024-01-15T05:30:00Z"},arrival:{airport:"JED",city:"Jeddah",time:"2024-01-15T10:00:00Z"},duration:"5h 30m",price:299.99,stops:0,class:"Economy"},{id:"2",airline:"Airline B",departure:{airport:"LHE",city:"Lahore",time:"2024-01-15T13:15:00Z"},arrival:{airport:"JED",city:"Jeddah",time:"2024-01-15T18:45:00Z"},duration:"5h 30m",price:349.99,stops:1,class:"Economy"},{id:"3",airline:"Airline C",departure:{airport:"LHE",city:"Lahore",time:"2024-01-15T21:30:00Z"},arrival:{airport:"JED",city:"Jeddah",time:"2024-01-16T03:00:00Z"},duration:"5h 30m",price:279.99,stops:0,class:"Economy"},{id:"4",airline:"Fly Jinnah",departure:{airport:"LHE",city:"Lahore",time:"2024-01-16T09:00:00Z"},arrival:{airport:"DXB",city:"Dubai",time:"2024-01-16T13:00:00Z"},duration:"4h 00m",price:320,stops:0,class:"Economy"},{id:"5",airline:"SAUDIA",departure:{airport:"ISB",city:"Islamabad",time:"2024-01-16T16:30:00Z"},arrival:{airport:"JED",city:"Jeddah",time:"2024-01-16T22:00:00Z"},duration:"5h 30m",price:410.5,stops:0,class:"Economy"},{id:"6",airline:"Emirates",departure:{airport:"LHE",city:"Lahore",time:"2024-01-17T00:30:00Z"},arrival:{airport:"DXB",city:"Dubai",time:"2024-01-17T04:30:00Z"},duration:"4h 00m",price:450,stops:1,class:"Business"}]})},24663,20616,e=>{"use strict";var t=e.i(93955),s=e.i(47400),l=e.i(36982),a=e.i(8004);function r({mode:e="flights",onSearch:r,loading:i=!1}){let{filters:o,updateFilters:n,setDestinationMode:d,setBudgetPerPerson:c,setFlightTripType:u,setAdults:x,setChildren:m,setRooms:p}=(0,l.useStore)(),[h,f]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),k=(0,s.useRef)(null),D=(0,s.useRef)(!1),S=(0,s.useCallback)(e=>{e.preventDefault(),"function"==typeof r&&r(o),f(!1),g(!1),j(!1)},[o,r]),A=e=>t=>{n({[e]:"number"===t.target.type?Number(t.target.value)||0:t.target.value})},L=e=>{d(e)},[$,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{console.log("Dropdown states:",{isDatesOpen:v,isFlightTravellersOpen:$,isOriginOpen:y,isDestinationOpen:w})},[v,$,y,w]),(0,s.useEffect)(()=>{let e=e=>{if(D.current){D.current=!1;return}let t=e.target,s=k.current&&k.current.contains(t),l=t.closest(".absolute")||t.closest('[role="dialog"]')||t.closest('input[type="date"]');s||l||(console.log("Closing all dropdowns - clicked outside"),f(!1),g(!1),j(!1),M(!1),N(!1),C(!1))},t=e=>{"Escape"===e.key&&(console.log("Closing all dropdowns - Escape key"),f(!1),g(!1),j(!1),M(!1),N(!1),C(!1))};return document.addEventListener("click",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",t)}},[]);let E=(0,s.useMemo)(()=>"anywhere"===o.destinationMode?"Anywhere":o.destinationText?o.destinationText:"City, region or property",[o.destinationMode,o.destinationText]),T=(0,s.useMemo)(()=>o.checkInDate&&o.checkOutDate?`${o.checkInDate} — ${o.checkOutDate}`:o.checkInDate?`${o.checkInDate} — Select check-out`:"Select dates",[o.checkInDate,o.checkOutDate]),I=(0,s.useMemo)(()=>{let e=o.adults??1,t=o.children??0,s=o.rooms??1,l=`${e} adult${1===e?"":"s"}`,a=t>0?` \xb7 ${t} child${1===t?"":"ren"}`:"",r=` \xb7 ${s} room${1===s?"":"s"}`;return`${l}${a}${r}`},[o.adults,o.children,o.rooms]),P=(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm",children:[(0,t.jsx)("button",{type:"button",onClick:()=>L("specific"),className:`px-3 py-1.5 rounded-full border text-xs sm:text-sm ${"specific"===o.destinationMode?"bg-teal-600 text-white border-teal-600":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,children:"Specific destination"}),(0,t.jsx)("button",{type:"button",onClick:()=>L("anywhere"),className:`px-3 py-1.5 rounded-full border text-xs sm:text-sm ${"anywhere"===o.destinationMode?"bg-teal-600 text-white border-teal-600":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,children:"Anywhere"}),(0,t.jsx)("button",{type:"button",onClick:()=>L("budget-first"),className:`px-3 py-1.5 rounded-full border text-xs sm:text-sm ${"budget-first"===o.destinationMode?"bg-teal-600 text-white border-teal-600":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,children:"Budget first"})]}),O=o.flightTripType||"round-trip",U="round-trip"===O,B=[{value:"Lahore",label:"Lahore, Pakistan",code:"LHE",airport:"Allama Iqbal International"},{value:"Islamabad",label:"Islamabad, Pakistan",code:"ISB",airport:"Islamabad International"},{value:"Karachi",label:"Karachi, Pakistan",code:"KHI",airport:"Jinnah International"},{value:"Dubai",label:"Dubai, United Arab Emirates",code:"DXB",airport:"Dubai International"},{value:"Jeddah",label:"Jeddah, Saudi Arabia",code:"JED",airport:"King Abdulaziz Intl"},{value:"Riyadh",label:"Riyadh, Saudi Arabia",code:"RUH",airport:"King Khalid International"},{value:"London",label:"London, United Kingdom",code:"LHR",airport:"Heathrow"},{value:"New York",label:"New York, United States",code:"JFK",airport:"John F. Kennedy International"},{value:"Los Angeles",label:"Los Angeles, United States",code:"LAX",airport:"Los Angeles International"},{value:"Toronto",label:"Toronto, Canada",code:"YYZ",airport:"Pearson International"}],_=(o.origin||"").trim().toLowerCase(),F=(o.destination||"").trim().toLowerCase(),R=(0,s.useMemo)(()=>_?B.filter(e=>`${e.label} ${e.code} ${e.airport}`.toLowerCase().includes(_)):B.slice(0,5),[_]),z=(0,s.useMemo)(()=>F?B.filter(e=>`${e.label} ${e.code} ${e.airport}`.toLowerCase().includes(F)):B.slice(0,5),[F]),H=()=>{let e=o.origin;n({origin:o.destination,destination:e})},J=(0,s.useMemo)(()=>{let e=(o.flightAdults||0)+(o.flightStudents||0)+(o.flightSeniors||0)+(o.flightYouths||0)+(o.flightChildren||0)+(o.flightToddlers||0)+(o.flightInfants||0),t=o.travelClass||"economy",s=t.charAt(0).toUpperCase()+t.slice(1).replace("-"," ");return 0===e?`1 traveler, ${s}`:`${e} ${1===e?"traveler":"travelers"}, ${s}`},[o.flightAdults,o.flightStudents,o.flightSeniors,o.flightYouths,o.flightChildren,o.flightToddlers,o.flightInfants,o.travelClass]),K=e=>{if(!e)return"";let t=new Date(e);return`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]} ${t.getMonth()+1}/${t.getDate()}`},W=(0,s.useMemo)(()=>o.departureDate?U&&o.returnDate?`${K(o.departureDate)} – ${K(o.returnDate)}`:K(o.departureDate):"Departure",[o.departureDate,o.returnDate,U]);if("flights"===e)return(0,t.jsxs)("form",{ref:k,onSubmit:S,className:"w-full bg-white rounded-xl md:rounded-2xl shadow-lg border border-slate-100 p-4 md:p-5 lg:p-6",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:P}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("select",{value:O,onChange:e=>u(e.target.value),className:"px-3 py-1.5 rounded-lg border border-slate-200 bg-white text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[(0,t.jsx)("option",{value:"round-trip",children:"Round-trip"}),(0,t.jsx)("option",{value:"one-way",children:"One-way"})]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch bg-white rounded-lg relative",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"From?",value:o.origin,onChange:e=>{n({origin:e.target.value}),N(!0),C(!1),j(!1),M(!1)},onMouseDown:e=>{D.current=!0},onFocus:()=>{console.log("Origin field focused"),D.current=!0,N(!0),C(!1),j(!1),M(!1)},onClick:e=>{e.stopPropagation(),console.log("Origin field clicked"),D.current=!0,N(!0),C(!1),j(!1),M(!1)},className:`w-full px-4 py-3 text-sm focus:outline-none border rounded-lg md:rounded-l-lg md:rounded-r-none md:border-r-0 ${y?"bg-teal-50 border-slate-200":"bg-transparent border-slate-200"}`,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":y}),(0,t.jsx)("button",{type:"button",onClick:H,className:"md:hidden absolute right-3 top-10 -translate-y-1/2 z-10 w-10 h-10 flex items-center justify-center bg-white hover:bg-slate-50 focus:outline-none transition-colors border border-slate-200 rounded-full shadow-sm","aria-label":"Swap origin and destination",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),!y&&(0,t.jsx)("div",{className:"hidden md:block absolute right-0 top-0 bottom-0 w-px bg-slate-200"}),y&&(0,t.jsxs)("div",{className:"absolute z-50 top-full left-0 mt-2 w-full sm:w-auto min-w-full sm:min-w-[360px] bg-white rounded-xl shadow-xl border border-slate-100 p-3 text-sm max-h-64 overflow-y-auto",style:{position:"absolute",display:"block"},children:[_&&R.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-2 text-xs",children:"Search results"}),(0,t.jsx)("div",{className:"flex flex-col",children:R.map(e=>(0,t.jsxs)("button",{type:"button",className:"px-3 py-2 text-left rounded hover:bg-slate-50 flex items-start gap-3",onClick:t=>{t.preventDefault(),t.stopPropagation(),n({origin:e.value}),N(!1)},children:[(0,t.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-100 rounded",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-slate-800",children:e.label}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.code})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.airport})]})]},`${e.code}-origin`))})]}),_&&0===R.length&&(0,t.jsx)("p",{className:"text-xs text-slate-500 py-2",children:"No airports match your search."}),!_&&R.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-2 text-xs",children:"Popular destinations"}),(0,t.jsx)("div",{className:"flex flex-col",children:R.map(e=>(0,t.jsxs)("button",{type:"button",className:"px-3 py-2 text-left rounded hover:bg-slate-50 flex items-start gap-3",onClick:t=>{t.preventDefault(),t.stopPropagation(),n({origin:e.value}),N(!1)},children:[(0,t.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-100 rounded",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-slate-800",children:e.label}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.code})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.airport})]})]},`${e.code}-popular-origin`))})]})]})]}),(0,t.jsxs)("div",{className:"hidden md:flex relative flex-shrink-0",children:[(0,t.jsx)("button",{type:"button",onClick:H,className:"px-2 h-full flex items-center justify-center bg-white hover:bg-slate-50 focus:outline-none transition-colors border-y border-slate-200","aria-label":"Swap origin and destination",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),!y&&!w&&(0,t.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-slate-200"})]}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"To?",value:o.destination,onChange:e=>{n({destination:e.target.value}),C(!0),N(!1),j(!1),M(!1)},onMouseDown:e=>{D.current=!0},onFocus:()=>{console.log("Destination field focused"),D.current=!0,C(!0),N(!1),j(!1),M(!1)},onClick:e=>{e.stopPropagation(),console.log("Destination field clicked"),D.current=!0,C(!0),N(!1),j(!1),M(!1)},className:`w-full px-4 py-3 text-sm focus:outline-none border rounded-lg md:rounded-none md:border-l-0 md:border-r-0 ${w?"bg-teal-50 border-slate-200":"bg-transparent border-slate-200"}`,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":w}),!w&&!v&&(0,t.jsx)("div",{className:"hidden md:block absolute right-0 top-0 bottom-0 w-px bg-slate-200"}),w&&(0,t.jsxs)("div",{className:"absolute z-50 top-full left-0 mt-2 w-full sm:w-auto min-w-full sm:min-w-[360px] bg-white rounded-xl shadow-xl border border-slate-100 p-3 text-sm max-h-64 overflow-y-auto",style:{position:"absolute",display:"block"},children:[F&&z.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-2 text-xs",children:"Search results"}),(0,t.jsx)("div",{className:"flex flex-col",children:z.map(e=>(0,t.jsxs)("button",{type:"button",className:"px-3 py-2 text-left rounded hover:bg-slate-50 flex items-start gap-3",onClick:t=>{t.preventDefault(),t.stopPropagation(),n({destination:e.value}),C(!1)},children:[(0,t.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-100 rounded",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-slate-800",children:e.label}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.code})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.airport})]})]},`${e.code}-destination`))})]}),F&&0===z.length&&(0,t.jsx)("p",{className:"text-xs text-slate-500 py-2",children:"No airports match your search."}),!F&&z.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-2 text-xs",children:"Popular destinations"}),(0,t.jsx)("div",{className:"flex flex-col",children:z.map(e=>(0,t.jsxs)("button",{type:"button",className:"px-3 py-2 text-left rounded hover:bg-slate-50 flex items-start gap-3",onClick:t=>{t.preventDefault(),t.stopPropagation(),n({destination:e.value}),C(!1)},children:[(0,t.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-slate-100 rounded",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-slate-800",children:e.label}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:e.code})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.airport})]})]},`${e.code}-popular-destination`))})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 relative overflow-visible",children:[(0,t.jsx)("button",{type:"button",onMouseDown:e=>{D.current=!0},onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Date button clicked, current state:",v),D.current=!0;let t=!v;console.log("Setting dates open to:",t),j(t),N(!1),C(!1),M(!1)},className:`w-full px-4 py-3 text-left text-sm text-slate-700 focus:outline-none border rounded-lg md:rounded-none md:border-l-0 md:border-r-0 ${v?"bg-teal-50 border-slate-200":"bg-transparent border-slate-200 hover:bg-slate-50"}`,children:W}),!v&&!$&&(0,t.jsx)("div",{className:"hidden md:block absolute right-0 top-0 bottom-0 w-px bg-slate-200"}),v&&(0,t.jsx)("div",{className:"absolute z-50 top-full left-0 mt-2 w-full sm:w-auto min-w-full sm:min-w-[280px] bg-white rounded-xl shadow-xl border border-slate-100 p-4",onClick:e=>{e.stopPropagation(),console.log("Date dropdown clicked")},onMouseDown:e=>{e.stopPropagation()},children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Departure"}),(0,t.jsx)("input",{type:"date",value:o.departureDate,onChange:e=>{A("departureDate")(e),U||j(!1)},className:"w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm"})]}),U&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Return"}),(0,t.jsx)("input",{type:"date",value:o.returnDate,onChange:e=>{A("returnDate")(e),o.departureDate&&j(!1)},min:o.departureDate,className:"w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm"})]})]})})]}),(0,t.jsxs)("div",{className:"flex-1 relative overflow-visible",children:[(0,t.jsx)("button",{type:"button",onMouseDown:e=>{D.current=!0},onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("Travellers button clicked, current state:",$),D.current=!0;let t=!$;console.log("Setting travellers open to:",t),M(t),N(!1),C(!1),j(!1)},className:`w-full px-4 py-3 text-left text-sm text-slate-700 focus:outline-none border rounded-lg md:rounded-none md:border-l-0 ${$?"bg-teal-50 border-slate-200":"bg-transparent border-slate-200 hover:bg-slate-50"}`,children:J}),!$&&(0,t.jsx)("div",{className:"hidden md:block absolute right-0 top-0 bottom-0 w-px bg-slate-200"}),$&&(0,t.jsx)("div",{className:"absolute z-50 top-full left-0 sm:left-auto sm:right-0 mt-2 w-full sm:w-auto min-w-full sm:min-w-[320px] bg-white rounded-xl shadow-xl border border-slate-100 p-4",onClick:e=>{e.stopPropagation(),console.log("Travellers dropdown clicked")},onMouseDown:e=>{e.stopPropagation()},style:{position:"absolute",display:"block"},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Travelers"}),[{id:"adults",label:"Adults",helper:"18-64",min:1},{id:"students",label:"Students",helper:"over 18",min:0},{id:"seniors",label:"Seniors",helper:"over 65",min:0},{id:"youths",label:"Youths",helper:"12-17",min:0},{id:"children",label:"Children",helper:"2-11",min:0},{id:"toddlers",label:"Toddlers in own seat",helper:"under 2",min:0},{id:"infants",label:"Infants on lap",helper:"under 2",min:0}].map(e=>{let s={adults:"flightAdults",students:"flightStudents",seniors:"flightSeniors",youths:"flightYouths",children:"flightChildren",toddlers:"flightToddlers",infants:"flightInfants"}[e.id]||"flightAdults",l=o[s]||0;return(0,t.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-b-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-800",children:e.label}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.helper})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",className:"w-7 h-7 flex items-center justify-center rounded-full border border-slate-300 text-slate-700 hover:border-teal-500 hover:text-teal-600 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-300 disabled:hover:text-slate-700 transition-colors",onClick:()=>{let t=Math.max(e.min,l-1),a={[s]:t};"adults"===e.id&&(a.passengers=t),n(a),console.log(`Decreased ${e.id} to ${t}`,a)},disabled:l<=e.min,children:"−"}),(0,t.jsx)("span",{className:"w-8 text-center text-sm font-medium text-slate-800",children:l}),(0,t.jsx)("button",{type:"button",className:"w-7 h-7 flex items-center justify-center rounded-full border border-slate-300 text-slate-700 hover:border-teal-500 hover:text-teal-600 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-300 disabled:hover:text-slate-700 transition-colors",onClick:()=>{let t=l+1,a={[s]:t};"adults"===e.id&&(a.passengers=t),n(a),console.log(`Increased ${e.id} to ${t}`,a)},children:"+"})]})]},e.id)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-slate-800 mb-3",children:"Cabin Class"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["economy","premium-economy","business","first"].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>n({travelClass:e}),className:`px-3 py-2 rounded-lg border text-sm ${o.travelClass===e?"border-teal-600 bg-teal-50 text-teal-700 font-medium":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"}`,children:e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ")},e))})]})]})})]}),(0,t.jsx)("div",{className:"flex items-stretch flex-shrink-0 w-full md:w-auto mt-2 md:mt-0",children:(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full md:w-auto px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-semibold text-sm whitespace-nowrap  md:rounded-r-lg rounded-lg md:rounded-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 h-full",children:"Search"})})]})]});let Y=(e,t)=>{"adults"===e&&x(Math.min(6,Math.max(1,(o.adults??1)+t))),"children"===e&&m(Math.min(6,Math.max(0,(o.children??0)+t))),"rooms"===e&&p(Math.min(6,Math.max(1,(o.rooms??1)+t)))},Z=[{value:"Lahore",label:"Lahore, Pakistan"},{value:"Islamabad",label:"Islamabad, Pakistan"},{value:"Dubai",label:"Dubai, United Arab Emirates"},{value:"London",label:"London, United Kingdom"},{value:"Los Angeles",label:"Los Angeles, United States"}],X=Array.isArray(o.recentDestinations)&&o.recentDestinations.length>0?o.recentDestinations:[],G=(o.destinationText||"").trim().toLowerCase(),V=(0,s.useMemo)(()=>{if(!G)return[];let e=[...X.map(e=>({value:e,label:e})),...Z],t=new Set;return e.filter(e=>{let s=e.value;return!t.has(s)&&(t.add(s),e.label.toLowerCase().includes(G))})},[G,X,Z]);return(0,t.jsxs)("form",{ref:k,onSubmit:S,className:"w-full bg-white rounded-xl md:rounded-2xl shadow-lg border border-slate-100 p-4 md:p-5 lg:p-6 flex flex-col gap-3 md:gap-4",children:[(0,t.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:P}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[minmax(0,2.2fr)_minmax(0,2.2fr)_minmax(0,1.6fr)_auto] gap-3 md:gap-4 items-stretch",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-700",children:"Where are you going?"}),(0,t.jsx)("input",{type:"text",value:o.destinationText,onChange:e=>{n({destinationText:e.target.value,destinationMode:"specific"}),f(!0),g(!1),j(!1)},onFocus:()=>{f(!0),g(!1),j(!1)},placeholder:E,className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm text-slate-700 bg-white hover:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500","aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":h}),h&&(0,t.jsxs)("div",{className:"absolute z-20 top-full left-0 mt-2 w-full md:w-[360px] bg-white rounded-xl shadow-xl border border-slate-100 p-3 text-xs sm:text-sm",children:[G&&V.length>0&&(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-1",children:"Search results"}),(0,t.jsx)("div",{className:"flex flex-col",children:V.map(e=>(0,t.jsx)("button",{type:"button",className:"px-2 py-1.5 text-left rounded hover:bg-slate-50",onClick:()=>{n({destinationText:e.value,destinationMode:"specific"}),f(!1)},children:e.label},e.label))})]}),!G&&X.length>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-1",children:"Your recent searches"}),(0,t.jsx)("div",{className:"flex flex-col",children:X.map(e=>(0,t.jsx)("button",{type:"button",className:"px-2 py-1.5 text-left rounded hover:bg-slate-50",onClick:()=>{n({destinationText:e,destinationMode:"specific"}),f(!1)},children:e},e))})]}),!G&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-700 mb-1",children:"Trending destinations"}),(0,t.jsx)("div",{className:"flex flex-col",children:Z.map(e=>(0,t.jsx)("button",{type:"button",className:"px-2 py-1.5 text-left rounded hover:bg-slate-50",onClick:()=>{n({destinationText:e.value,destinationMode:"specific"}),f(!1)},children:e.label},e.label))})]}),G&&0===V.length&&(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"No destinations match your search."})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-700",children:"Check-in — Check-out"}),(0,t.jsx)("button",{type:"button",className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-left text-sm text-slate-700 bg-white hover:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500",onClick:()=>{j(!0),f(!1),g(!1)},"aria-haspopup":"dialog","aria-expanded":v,children:T}),v&&(0,t.jsxs)("div",{className:"absolute z-20 top-full left-0 mt-2 w-full md:w-[420px] bg-white rounded-xl shadow-xl border border-slate-100 p-3 text-xs sm:text-sm",role:"dialog","aria-label":"Select dates",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-[11px] font-semibold text-slate-600",children:"Check-in"}),(0,t.jsx)("input",{type:"date",value:o.checkInDate,onChange:A("checkInDate"),className:"w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-xs sm:text-sm"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-[11px] font-semibold text-slate-600",children:"Check-out"}),(0,t.jsx)("input",{type:"date",value:o.checkOutDate,onChange:A("checkOutDate"),className:"w-full px-3 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-xs sm:text-sm"})]})]}),(0,t.jsx)("p",{className:"mt-2 text-[11px] text-slate-500",children:"We're in beta. You'll see real availability from partner sites."})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 relative",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-slate-700",children:"Travellers"}),(0,t.jsx)("button",{type:"button",className:`w-full px-3 py-2 rounded-lg border text-left text-sm text-slate-700 bg-white hover:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500 ${b?"border-teal-500 ring-2 ring-teal-500":"border-slate-200"}`,onClick:()=>{g(e=>!e),f(!1),j(!1)},"aria-haspopup":"dialog","aria-expanded":b,children:I}),b&&(0,t.jsxs)("div",{className:"absolute z-20 top-full left-0 mt-2 w-full md:w-[380px] bg-white rounded-xl shadow-xl border border-slate-100 p-4 text-xs sm:text-sm",role:"dialog","aria-label":"Select travellers",children:[[{id:"adults",label:"Adults",helper:"Ages 18+"},{id:"children",label:"Children",helper:"Ages 0–17"},{id:"rooms",label:"Rooms",helper:""}].map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-slate-200 last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-800",children:e.label}),e.helper&&(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.helper})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-slate-300 text-slate-700 hover:border-teal-500 hover:text-teal-600 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-300 disabled:hover:text-slate-700 transition-colors",onClick:()=>Y(e.id,-1),disabled:"adults"===e.id&&(o.adults??1)<=1||"children"===e.id&&(o.children??0)<=0||"rooms"===e.id&&(o.rooms??1)<=1,children:(0,t.jsx)("span",{className:"text-lg leading-none",children:"−"})}),(0,t.jsx)("span",{className:"w-8 text-center text-base font-medium text-slate-800",children:"adults"===e.id?o.adults??1:"children"===e.id?o.children??0:o.rooms??1}),(0,t.jsx)("button",{type:"button",className:"w-8 h-8 flex items-center justify-center rounded-full border-2 border-slate-300 text-slate-700 hover:border-teal-500 hover:text-teal-600 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:border-slate-300 disabled:hover:text-slate-700 transition-colors",onClick:()=>Y(e.id,1),disabled:"adults"===e.id&&(o.adults??1)>=6||"children"===e.id&&(o.children??0)>=6||"rooms"===e.id&&(o.rooms??1)>=6,children:(0,t.jsx)("span",{className:"text-lg leading-none",children:"+"})})]})]},e.id)),(0,t.jsx)("p",{className:"mt-3 text-xs text-slate-500",children:"We're in beta. Final availability and pricing come from partner sites."}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)(a.default,{type:"button",size:"sm",variant:"primary",onClick:()=>g(!1),children:"Done"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 justify-end",children:[(0,t.jsx)("div",{className:"h-5"}),(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full whitespace-nowrap px-3 py-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold text-sm rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",children:"Search"})]})]})]})}function i({currentPage:e,totalPages:s,totalItems:l,itemsPerPage:a,onPageChange:r,itemLabel:i="items"}){if(s<=1)return null;let o=Math.min(e*a,l);return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>r(e-1),disabled:1===e,className:"px-4 py-2 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let t=[];if(s<=5)for(let e=1;e<=s;e++)t.push(e);else if(e<=3){for(let e=1;e<=4;e++)t.push(e);t.push("..."),t.push(s)}else if(e>=s-2){t.push(1),t.push("...");for(let e=s-3;e<=s;e++)t.push(e)}else{t.push(1),t.push("...");for(let s=e-1;s<=e+1;s++)t.push(s);t.push("..."),t.push(s)}return t})().map((s,l)=>"..."===s?(0,t.jsx)("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${l}`):(0,t.jsx)("button",{onClick:()=>r(s),className:`w-10 h-10 rounded-lg font-medium transition-colors text-sm ${e===s?"bg-teal-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:s},s))}),(0,t.jsx)("button",{onClick:()=>r(e+1),disabled:e===s,className:"px-4 py-2 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:"Next"})]}),(0,t.jsxs)("p",{className:"text-sm text-slate-500",children:["Showing ",(e-1)*a+1," - ",o," of ",l," ",i]})]})}e.s(["default",()=>r],24663),e.s(["default",()=>i],20616)},65426,e=>{"use strict";var t=e.i(93955),s=e.i(47400),l=e.i(70064),a=e.i(62954),r=e.i(95089),i=e.i(20614),o=e.i(87539);let n=null,d=null,c=async()=>{if(n&&d&&Date.now()<d)return n;try{let e=await fetch(`${o.AMADEUS_CONFIG.BASE_URL}/v1/security/oauth2/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=client_credentials&client_id=${o.AMADEUS_CONFIG.API_KEY}&client_secret=${o.AMADEUS_CONFIG.API_SECRET}`}),t=await e.json();if(!e.ok)throw Error(`Failed to get Amadeus token: ${t.error_description||t.error}`);return n=t.access_token,d=Date.now()+(t.expires_in-60)*1e3,n}catch(e){throw console.error("Error getting Amadeus token:",e),e}},u=async(e={})=>{try{if(o.USE_MOCK_DATA){await new Promise(e=>setTimeout(e,500));let t=i.default.flights;return e.origin&&(t=t.filter(t=>t.departure.airport.toLowerCase().includes(e.origin.toLowerCase())||t.departure.city.toLowerCase().includes(e.origin.toLowerCase()))),e.destination&&(t=t.filter(t=>t.arrival.airport.toLowerCase().includes(e.destination.toLowerCase())||t.arrival.city.toLowerCase().includes(e.destination.toLowerCase()))),t}let s=await c(),l=new URLSearchParams({originLocationCode:e.origin?.toUpperCase()||"LHR",destinationLocationCode:e.destination?.toUpperCase()||"DXB",departureDate:e.departureDate||new Date().toISOString().split("T")[0],adults:e.adults||1,max:e.maxResults||200,currencyCode:e.currency||"USD"});if(e.returnDate&&l.append("returnDate",e.returnDate),e.travelClass){var t;let s;l.append("travelClass",(s=((t=e.travelClass)||"").toLowerCase(),"economy"===s?"ECONOMY":"premium-economy"===s?"PREMIUM_ECONOMY":"business"===s?"BUSINESS":"first"===s?"FIRST":(t||"").toUpperCase()))}e.nonStop&&l.append("nonStop","true"),e.children&&l.append("children",e.children),e.infants&&l.append("infants",e.infants);let a=await fetch(`${o.AMADEUS_CONFIG.BASE_URL}/v2/shopping/flight-offers?${l}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),r=await a.json();if(!a.ok)throw Error(`Amadeus API error: ${r.errors?.[0]?.detail||a.statusText}`);if(!r.data||!Array.isArray(r.data))return[];let n=r.dictionaries?.carriers||{},d=r.dictionaries?.aircraft||{};return r.data.map((e,t)=>{let s=e.itineraries[0],l=s.segments,a=l[0],i=l[l.length-1],o=e.price;return{id:e.id||`flight-${t}`,airline:{name:n[a.carrierCode]||a.carrierCode,code:a.carrierCode,logo:`https://pics.avs.io/200/80/${a.carrierCode}.png`},flightNumber:`${a.carrierCode}${a.number}`,departure:{airport:a.departure.iataCode,terminal:a.departure.terminal||"",time:a.departure.at,city:r.dictionaries?.locations?.[a.departure.iataCode]?.cityCode||a.departure.iataCode},arrival:{airport:i.arrival.iataCode,terminal:i.arrival.terminal||"",time:i.arrival.at,city:r.dictionaries?.locations?.[i.arrival.iataCode]?.cityCode||i.arrival.iataCode},duration:s.duration.replace("PT","").toLowerCase(),stops:l.length-1,stopDetails:l.length>1?l.slice(0,-1).map(e=>({airport:e.arrival.iataCode,duration:e.duration})):[],price:{amount:parseFloat(o.total),currency:o.currency,formatted:`${o.currency} ${parseFloat(o.total).toFixed(2)}`},cabin:(e.travelerPricings?.[0]?.fareDetailsBySegment?.[0]?.cabin||"ECONOMY").replace(/_/g," "),seatsAvailable:e.numberOfBookableSeats||0,aircraft:d[a.aircraft?.code]||a.aircraft?.code||"Unknown",bookingClass:e.travelerPricings?.[0]?.fareDetailsBySegment?.[0]?.class||"",raw:e}})}catch(e){throw console.error("Error searching flights:",e),e}};var x=e.i(36982),m=e.i(24663),p=e.i(7120),h=e.i(8004),f=e.i(86766);function b({flight:e}){if(!e)return null;let s=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),l=0===e.stops,r=e.cabin||e.class||"Economy",i="string"==typeof r?r.replace(/_/g," "):"Economy";return(0,t.jsx)(a.default,{className:"border-slate-200 hover:border-teal-400 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:[e.airline?.logo&&(0,t.jsx)("img",{src:e.airline.logo,alt:e.airline.name||e.airline.code,className:"h-4 w-auto"}),"object"==typeof e.airline?e.airline.name||e.airline.code:e.airline]}),(0,t.jsx)("span",{className:"text-[11px] font-medium bg-purple-50 text-purple-700 px-2 py-1 rounded-full border border-purple-100",children:i}),l?(0,t.jsx)("span",{className:"text-[11px] font-medium bg-green-50 text-green-700 px-2 py-1 rounded-full border border-green-100",children:"Nonstop"}):(0,t.jsxs)("span",{className:"text-[11px] font-medium bg-amber-50 text-amber-700 px-2 py-1 rounded-full border border-amber-100",children:[e.stops," stop",e.stops>1?"s":""]}),(0,t.jsx)("span",{className:"text-[11px] font-medium bg-teal-50 text-teal-700 px-2 py-1 rounded-full border border-teal-100",children:"Beta"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-xs sm:text-sm text-slate-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Departure"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:s(e.departure.time)}),(0,t.jsx)("p",{className:"text-slate-600",children:e.departure.airport}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:e.departure.city})]}),(0,t.jsxs)("div",{className:"hidden sm:block",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Duration"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:e.duration}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:l?"Direct flight":"Includes layovers"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Arrival"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:s(e.arrival.time)}),(0,t.jsx)("p",{className:"text-slate-600",children:e.arrival.airport}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:e.arrival.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Date"}),(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:new Date(e.departure.time).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Live prices from partners"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row lg:flex-col items-end gap-3 lg:min-w-[160px]",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-teal-600",children:"object"==typeof e.price?e.price.formatted||`${e.price.currency} ${e.price.amount}`:(0,f.formatPriceWithCurrency)(e.price)}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"per person • redirects to partner site"})]}),(0,t.jsx)(h.default,{variant:"primary",size:"sm",className:"w-full lg:w-auto whitespace-nowrap",children:"View booking options"})]})]})})}var g=e.i(20616);function v(){let{filters:e,searchResults:i,updateSearchResults:o}=(0,x.useStore)(),[n,d]=(0,s.useState)(!1),[c,h]=(0,s.useState)({}),[f,v]=(0,s.useState)(1),j=(0,s.useRef)(!1);(0,s.useEffect)(()=>{j.current||i.flights&&0!==i.flights.length||(j.current=!0,(async()=>{d(!0);try{let e=await u({});o("flights",e)}catch(e){console.error("Error loading flights:",e)}finally{d(!1)}})())},[i.flights,o]);let y=async e=>{if(!n){d(!0);try{let t=await u({origin:e.origin,destination:e.destination,departureDate:e.departureDate,travelClass:e.travelClass||"economy",adults:e.flightAdults&&Number(e.flightAdults)>0?e.flightAdults:e.passengers&&Number(e.passengers)>0?e.passengers:1});o("flights",t)}catch(e){console.error("Error searching flights:",e)}finally{d(!1)}}},N=(0,s.useMemo)(()=>{let e=i.flights||[];if(c.stops&&"any"!==c.stops&&("nonstop"===c.stops?e=e.filter(e=>0===e.stops):"1"===c.stops?e=e.filter(e=>1===e.stops):"2plus"===c.stops&&(e=e.filter(e=>e.stops>=2))),c.maxPrice){let t=Number(c.maxPrice);e=e.filter(e=>("object"==typeof e.price?e.price.amount:e.price)<=t)}if(Array.isArray(c.departureAirports)&&c.departureAirports.length>0&&(e=e.filter(e=>c.departureAirports.includes(e?.departure?.airport))),Array.isArray(c.arrivalAirports)&&c.arrivalAirports.length>0&&(e=e.filter(e=>c.arrivalAirports.includes(e?.arrival?.airport))),c.timeOfDay&&"any"!==c.timeOfDay&&(e=e.filter(e=>{let t=e?.departure?.time;if(!t)return!0;let s=new Date(t).getHours();return"morning"===c.timeOfDay?s>=5&&s<12:"afternoon"===c.timeOfDay?s>=12&&s<18:"evening"===c.timeOfDay?s>=18&&s<23:"night"!==c.timeOfDay||s>=23||s<5})),Array.isArray(c.airlines)&&c.airlines.length>0&&(e=e.filter(e=>{let t="object"==typeof e.airline?e.airline.name||e.airline.code:e.airline;return c.airlines.includes(t)})),c.maxDurationHours){let t=60*Number(c.maxDurationHours);e=e.filter(e=>(e=>{if(!e||"string"!=typeof e)return 1/0;let t=e.match(/(\d+)\s*h\s*(\d+)?/i);return t?60*(parseInt(t[1],10)||0)+(parseInt(t[2]||"0",10)||0):1/0})(e.duration)<=t)}return e},[i.flights,c]),w=(0,s.useMemo)(()=>{let e=i.flights||[],t=new Set;return e.forEach(e=>{if(e.airline){let s="object"==typeof e.airline?e.airline.name||e.airline.code:e.airline;t.add(s)}}),Array.from(t)},[i.flights]),C=(0,s.useMemo)(()=>{let e=i.flights||[],t=new Map,s=new Map;return e.forEach(e=>{let l=e?.departure?.airport,a=e?.departure?.city;l&&(t.has(l)||t.set(l,{code:l,city:a||l,count:0}),t.get(l).count+=1);let r=e?.arrival?.airport,i=e?.arrival?.city;r&&(s.has(r)||s.set(r,{code:r,city:i||r,count:0}),s.get(r).count+=1)}),{departure:Array.from(t.values()),arrival:Array.from(s.values())}},[i.flights]),k=i.flights?.length||0,D=Math.ceil(N.length/8),S=(0,s.useMemo)(()=>{let e=(f-1)*8;return N.slice(e,e+8)},[N,f]);return(0,s.useEffect)(()=>{v(1)},[c,i.flights]),(0,t.jsx)(l.default,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6 md:space-y-8",children:[(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Flights"}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900",children:"Search hundreds of flight sites at once"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-slate-600 max-w-2xl",children:"Compare real-time flight prices from our partner sites. We're in beta and continuously improving our platform."})]}),(0,t.jsx)(m.default,{mode:"flights",onSearch:y,loading:n}),(0,t.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-6 items-start",children:[(0,t.jsx)("div",{className:"md:col-span-4 lg:col-span-3 order-2 md:order-1",children:(0,t.jsx)(p.default,{mode:"flights",onChange:h,flightOptions:{airlines:w,departureAirports:C.departure,arrivalAirports:C.arrival,totalCount:k,filteredCount:N.length}})}),(0,t.jsxs)("div",{className:"space-y-4 md:col-span-8 lg:col-span-9 order-1 md:order-2",children:[(0,t.jsx)(a.default,{className:"border-slate-200",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-800",children:N.length>0?`${N.length} flights found`:"No flights match your current filters"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Live prices from partner sites. We're in beta and continuously improving our platform."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-slate-500",children:"Sort by:"}),(0,t.jsx)("button",{className:"px-3 py-1.5 rounded-full bg-teal-600 text-white font-semibold transition-colors",children:"Best"}),(0,t.jsx)("button",{className:"px-3 py-1.5 rounded-full bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors",children:"Cheapest"}),(0,t.jsx)("button",{className:"px-3 py-1.5 rounded-full bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors",children:"Quickest"})]})]})}),n&&(0,t.jsx)(a.default,{className:"border-slate-200",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"}),(0,t.jsx)("p",{className:"mt-2 text-slate-600 text-sm",children:"Loading flights…"})]})}),!n&&N.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3",children:S.map(e=>(0,t.jsx)(b,{flight:e},e.id))}),(0,t.jsx)(g.default,{currentPage:f,totalPages:D,totalItems:N.length,itemsPerPage:8,onPageChange:v,itemLabel:"flights"})]}),!n&&(!i.flights||0===i.flights.length)&&(0,t.jsxs)(a.default,{className:"bg-teal-50 border-teal-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-teal-800",children:"Start your search"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-slate-700 space-y-1 text-sm mb-3",children:[(0,t.jsx)("li",{children:"Search from any origin to any destination."}),(0,t.jsx)("li",{children:"Adjust filters on the left to refine your results."}),(0,t.jsx)("li",{children:'When you find a flight, click "View booking options" to complete your booking on partner sites.'})]}),(0,t.jsx)(r.default,{href:"/",className:"text-xs text-teal-700 underline",children:"Back to home"})]})]})]})]})})}e.s(["default",()=>v],65426)}]);